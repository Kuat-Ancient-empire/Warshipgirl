# METHODS 函数表
# WARNING：All the variables use in this effect must be in the same scope, 
# or otherwise the method will not able to read the data correctly
# 警告：所有变量必须处于同一个值域（SCOPE），否则以下脚本方法将不能读取数据
# 
####################################################################################
# add_array = { ARRAY, VALUE }
# 
# 在数组最后添加一个变量，数值可以为另外一个变量名
# add a number to the end of an array
# input: ARRAY, VALUE # 数组名及要添加的数值
# 数组最大索引为9999
# maximum index: 9999
####################################################################################

# 在数组最后添加一个变量
# add a number to the end of an array
# input: ARRAY, VALUE # 数组名及要添加的数值
# 数组最大索引为9999
# maximum index: 9999
add_array = {
	optimize_memory
	if = {
		limit = { check_variable = { which = $ARRAY$ value = 0 }}
		set_array = { ARRAY = $ARRAY$ INDEX = 0 VALUE = $VALUE$ }
	} else = {
		get_digits = { ARRAY = $ARRAY$ VARIABLE = $ARRAY$ }
		if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 1 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 1 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 2 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 2 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 3 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 3 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 4 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 4 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 5 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 5 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 6 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 6 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 7 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 7 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 8 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 8 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_1 value = 9 }}
			add_array_set_digit_2 = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = 9 }
		}
	}
	change_variable = { which = $ARRAY$ value = 1 }
}

add_array_set_digit_2 = {
	optimize_memory
	if = {
		limit = { check_variable = { which = $ARRAY$_DIGITS value = 1 }}
		add_array_set_variable = { ARRAY = $ARRAY$ INDEX = $INDEX$ VALUE = $VALUE$ }
	} else = {
		if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 0 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$0 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 1 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$1 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 2 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$2 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 3 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$3 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 4 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$4 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 5 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$5 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 6 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$6 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 7 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$7 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 8 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$8 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 9 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$9 }
		} else_if = {
			limit = { check_variable = { which = $ARRAY$_DIGIT_2 value = 0 }}
			add_array_set_variable = { ARRAY = $ARRAY$ VALUE = $VALUE$ INDEX = $INDEX$0 }
		}
	}
}

# set the variable when the index has four digits ( 1000~9999 )
add_array_set_variable = {
	set_variable = {
		which = $ARRAY$_$INDEX$
		value = $VALUE$
	}
	clear_variable = $ARRAY$_DIGIT_1
	clear_variable = $ARRAY$_DIGIT_2
	clear_variable = $ARRAY$_DIGIT_3
	clear_variable = $ARRAY$_DIGIT_4
	clear_variable = $ARRAY$_DIGITS
	clear_variable = $ARRAY$_AT_DIGIT
	clear_variable = $ARRAY$_TEMP_INT
	clear_variable = $ARRAY$_TEMP
}