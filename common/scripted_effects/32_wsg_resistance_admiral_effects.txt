generate_random_ra_admiral_list = {
	optimize_memory
    random_list = {
        640 = {
            # 稀有级别：普通（R） 总概率：64%
            random_list = {
                5 = { 
                    modifier = { 
                        factor = 0 
                        has_country_flag = ra_admiral_1
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_junyo
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0 
                        has_country_flag = ra_admiral_2
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_chongqing
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_2 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0 
                        has_country_flag = ra_admiral_3
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_DM
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_3 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_4
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_fantasque
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_4 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_5
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_essex
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_5 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_6
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_nevada
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_6 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_7
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_AD
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_7 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_8
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_ranger
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_8 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_9
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_sirius
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_9 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_10
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_gearing
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_10 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_11
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_vanguard
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_11 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_12
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_ninghai
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_12 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_13
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_tashkent
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_13 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_14
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_kitayama
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_14 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_15
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_sukhbaatar
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_15 days = 360 }
                }
            }
        }
        240 = {
            # 稀有级别：稀有（UR） 总概率：24%
            random_list = {
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_101
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_eugen
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_101 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_102
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_helena
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_102 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_103
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_renown
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_103 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_104
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_yamato
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_104 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_105
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_changchun
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_105 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_106
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_johnston
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_106 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_107
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_richelieu
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_107 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_108
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_royal_ark
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_108 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_109
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_U47
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_109 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_110
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_hutton
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_110 days = 360 }
                }
            }
        }
        90 = {
            modifier = {
                factor = 0
                check_variable = { which = SSR_num value >= 5 }
            }
            modifier = { 
                add = -15
                any_owned_leader = { has_leader_flag = ra_enterprise }
            }
            modifier = { 
                add = -15
                any_owned_leader = { has_leader_flag = ra_VV }
            }
            modifier = { 
                add = -15
                any_owned_leader = { has_leader_flag = ra_hood }
            }
            modifier = { 
                add = -15
                any_owned_leader = { has_leader_flag = ra_rodney }
            }
            modifier = { 
                add = -15
                any_owned_leader = { has_leader_flag = ra_yukikaze }
            }
            # 稀有级别：传奇（SR） 总概率：9%
            random_list = {
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_201
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_enterprise
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_201 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_202
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_VV
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_202 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_203
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_hood
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_203 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_204
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_rodney
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_204 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_205
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_yukikaze
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_205 days = 360 }
                }
            }
        }
        30 = {
            modifier = { 
                factor = 0
                OR = { 
                    has_global_flag = wg_crisis_very_easy
                    has_global_flag = wg_crisis_easy
                    check_variable = { which = SSR_num value >= 4 }
                }
            }
            modifier = { 
                add = -6
                any_owned_leader = { has_leader_flag = ra_lexington }
            }
            modifier = { 
                add = -6
                any_owned_leader = { has_leader_flag = ra_missouri }
            }
            modifier = { 
                add = -6
                any_owned_leader = { has_leader_flag = ra_taiho_sh }
            }
            modifier = { 
                add = -6
                any_owned_leader = { has_leader_flag = ra_cobot }
            }
            # 稀有级别：隐藏（SSR）总概率：3%
            # 只有困难难度以上才会出
            random_list = {
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_1001 
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_lexington
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1001 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_1002
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_missouri
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1002 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_1003
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_taiho_sh
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1003 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_1004
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_cobot
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1004 days = 360 }
                }
            }
        }
    }
}

# vip保底抽奖
generate_random_greater_ra_admiral_list = {
	optimize_memory
    random_list = {
        130 = {
            # 稀有级别：稀有（UR） 总概率：30%
            random_list = {
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_101
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_eugen
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_101 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_102
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_helena
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_102 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_103
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_renown
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_103 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_104
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_yamato
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_104 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_105
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_changchun
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_105 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_106
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_johnston
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_106 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_107
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_richelieu
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_107 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_108
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_royal_ark
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_108 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_109
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_U47
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_109 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_110
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_hutton
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_110 days = 360 }
                }
            }
        }
        60 = {
            modifier = {
                factor = 0
                check_variable = { which = SR_num value >= 5 }
            }
            modifier = { 
                add = -10
                any_owned_leader = { has_leader_flag = ra_enterprise }
            }
            modifier = { 
                add = -10
                any_owned_leader = { has_leader_flag = ra_VV }
            }
            modifier = { 
                add = -10
                any_owned_leader = { has_leader_flag = ra_hood }
            }
            modifier = { 
                add = -10
                any_owned_leader = { has_leader_flag = ra_rodney }
            }
            modifier = { 
                add = -10
                any_owned_leader = { has_leader_flag = ra_yukikaze }
            }
            # 稀有级别：传奇（SR） 总概率：6%
            random_list = {
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_201
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_enterprise
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_201 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_202
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_VV
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_202 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_203
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_hood
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_203 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_204
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_rodney
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_204 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_205
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_yukikaze
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_205 days = 360 }
                }
            }
        }
        10 = {
            modifier = { 
                factor = 0
                OR = { 
                    has_global_flag = wg_crisis_very_easy
                    has_global_flag = wg_crisis_easy
                    check_variable = { which = SSR_num value >= 4 }
                }
            }
            modifier = { 
                add = -2
                any_owned_leader = { has_leader_flag = ra_lexington }
            }
            modifier = { 
                add = -2
                any_owned_leader = { has_leader_flag = ra_missouri }
            }
            modifier = { 
                add = -2
                any_owned_leader = { has_leader_flag = ra_taiho_sh }
            }
            modifier = { 
                add = -2
                any_owned_leader = { has_leader_flag = ra_cobot }
            }
            # 稀有级别：隐藏（SSR）总概率：10%
            # 只有高难度才会出
            random_list = {
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_1001 
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_lexington
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1001 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_1002
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_missouri
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1002 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_1003
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_taiho_sh
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1003 days = 360 }
                }
                5 = { 
                    modifier = { 
                        factor = 0
                        has_country_flag = ra_admiral_1004
                    }
                    modifier = {
                        factor = 0 
                        any_owned_leader = {
                            has_leader_flag = ra_cobot
                        }
                    }
                    set_timed_country_flag = { flag = ra_admiral_1004 days = 360 }
                }
            }
        }
    }
}

clear_all_admiral_flags = {
    remove_country_flag = ra_admiral_1
    remove_country_flag = ra_admiral_2
    remove_country_flag = ra_admiral_3
    remove_country_flag = ra_admiral_4
    remove_country_flag = ra_admiral_5
    remove_country_flag = ra_admiral_6
    remove_country_flag = ra_admiral_7
    remove_country_flag = ra_admiral_8
    remove_country_flag = ra_admiral_9
    remove_country_flag = ra_admiral_10
    remove_country_flag = ra_admiral_11
    remove_country_flag = ra_admiral_12
    remove_country_flag = ra_admiral_13
    remove_country_flag = ra_admiral_14
    remove_country_flag = ra_admiral_15

    remove_country_flag = ra_admiral_101
    remove_country_flag = ra_admiral_102
    remove_country_flag = ra_admiral_103
    remove_country_flag = ra_admiral_104
    remove_country_flag = ra_admiral_105
    remove_country_flag = ra_admiral_106
    remove_country_flag = ra_admiral_107
    remove_country_flag = ra_admiral_108
    remove_country_flag = ra_admiral_109
    remove_country_flag = ra_admiral_110

    remove_country_flag = ra_admiral_201
    remove_country_flag = ra_admiral_202
    remove_country_flag = ra_admiral_203
    remove_country_flag = ra_admiral_204
    remove_country_flag = ra_admiral_205

    remove_country_flag = ra_admiral_1001
    remove_country_flag = ra_admiral_1002
    remove_country_flag = ra_admiral_1003
    remove_country_flag = ra_admiral_1004
}