create_wg_crisis_exterminate_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Exterminate_Fleet"
		NUM_titan = 4
		NUM_dreadnought = 2
		NUM_bb = 10
		NUM_bc = 10
		NUM_ca = 10
		NUM_dd = 40
		NUM_uf_buffer = 1
		ATTACK_FLEET = yes
		add_trait_no_notify_EVENT = wg_crisis.120		# must be a fleet event id
	}
}

create_wg_crisis_main_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Main_Fleet"
		NUM_juggernaut = 2
		NUM_dreadnought = 2
		NUM_titan = 6
		NUM_carrier = 10
		NUM_bb = 20
		NUM_bc = 16
		NUM_ca = 10
		NUM_uf_buffer = 1
		ATTACK_FLEET = yes
		add_trait_no_notify_EVENT = wg_crisis.120		# must be a fleet event id
	}
}

create_wg_crisis_flagship_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_flagship_Fleet"
		NUM_flagship = 2
		NUM_juggernaut = 4
		NUM_dreadnought = 2
		NUM_titan = 10
		NUM_carrier = 10
		NUM_bb = 30
		NUM_bc = 20
		NUM_ca = 20
		NUM_dd = 40
		NUM_uf_buffer_portal = 2
		IS_BOSS = yes
		ATTACK_FLEET = yes
		add_trait_no_notify_EVENT = wg_crisis.121		# must be a fleet event id
	}
	last_created_fleet = {
		set_fleet_flag = flagship_fleet
	}
	event_target:wg_crisis_country = {
		change_variable = {
			which = "flagship_count"
			value = 1
		}
	}
}

create_wg_crisis_guard_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Portal_Guard_Fleet"
		NUM_flagship = 2
		NUM_juggernaut = 4
		NUM_dreadnought = 2
		NUM_titan = 10
		NUM_carrier = 10
		NUM_bb = 30
		NUM_bc = 20
		NUM_ca = 20
		NUM_dd = 30
		NUM_uf_buffer_portal = 2
		DISTANCE = 30
		IS_BOSS = yes
		GUARD_FLEET = yes
		add_trait_no_notify_EVENT = wg_crisis.122		# must be a fleet event id
	}
}

create_wg_crisis_convoy_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Convoy_Fleet"
		NUM_juggernaut = 4
		NUM_carrier = 10
		NUM_bc = 20
		NUM_ca = 50
		NUM_dd = 50
		NUM_uf_buffer = 1
		DISTANCE = 60
		add_trait_no_notify_EVENT = wg_crisis.120		# must be a fleet event id
	}
	last_created_fleet = {
		add_modifier = {
			modifier = uf_convoy_fleet_speed_buff
			multiplier = 0.6
		}
	}
}

create_wg_crisis_greater_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Main_Fleet"
		NUM_juggernaut = 2
		NUM_dreadnought = 2
		NUM_titan = 8
		NUM_carrier = 6
		NUM_bb = 30
		NUM_bc = 10
		NUM_ca = 20
		NUM_dd = 50
		NUM_uf_buffer = 1
		DISTANCE = 60
		add_trait_no_notify_EVENT = wg_crisis.122		# must be a fleet event id
	}
}

create_wg_crisis_colossus = {
	optimize_memory
	create_fleet = {
		name = "NAME_wg_crisis_colossus_fleet"
		effect = {
			set_owner = event_target:wg_crisis_country
			set_location = {
				target = PREV
				distance = 60
				angle = random
			}
			create_ship = {
				name = random
				design = "NAME_UF_Star_eater"
				graphical_culture = "wsg_01"
				upgradable = no
			}
			set_fleet_stance = passive
			set_fleet_flag = colossus_fleet
			event_target:wg_crisis_country = {
				change_variable = {
					which = uf_fleet_id
					value = 1
				}
			}
			event_target:wg_crisis_country = {
				change_variable = {
					which = uf_colossus_id
					value = 1
				}
			}
			solar_system = {
				set_variable = {
					which = fleet_id
					value = prev.uf_fleet_id
				}
			}
			set_variable = {
				which = "uf_fleet_id"
				value = event_target:wg_crisis_country.uf_fleet_id
			}
			set_variable = {
				which = uf_colossus_id
				value = event_target:wg_crisis_country.uf_colossus_id
			}
			save_event_target_as = uf_colossus_fleet
			fleet_event = {
				id = wg_crisis.97
			}
		}
		settings = {
			can_upgrade = no
			uses_naval_capacity = no
			can_change_leader = no
			can_change_composition = no
			can_disband = no
			spawn_debris = no
			ai_ignore_strength = yes
		}
	}
}

create_wg_crisis_weaker_exterminate_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Exterminate_Fleet"
		NUM_bb = 10
		NUM_bc = 6
		NUM_ca = 10
		NUM_dd = 40
		ATTACK_FLEET = yes
	}
}

create_wg_crisis_weaker_main_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Main_Fleet"
		NUM_titan = 2
		NUM_dreadnought = 2
		NUM_bb = 16
		NUM_bc = 6
		ATTACK_FLEET = yes
	}
}

create_wg_crisis_weaker_fleet_and_admiral = {
	optimize_memory
	random_list = {
		65 = {
			modifier = {
				add = -15
				has_global_flag = wg_crisis_normal
			}
			create_wg_crisis_weaker_admiral = yes
			create_wg_crisis_weaker_exterminate_fleet = yes
		}
		35 = {
			modifier = {
				add = 15
				has_global_flag = wg_crisis_normal
			}
			create_wg_crisis_weaker_admiral = yes
			create_wg_crisis_weaker_main_fleet = yes
		}
	}
}

create_wg_crisis_weaker_guard_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Portal_Guard_Fleet"
		NUM_titan = 4
		NUM_dreadnought = 2
		NUM_bb = 30
		NUM_bc = 10
		NUM_ca = 10
		NUM_dd = 40
		NUM_uf_buffer = 1
		DISTANCE = 30
		GUARD_FLEET = yes
		IS_BOSS = yes
	}
}

create_wg_crisis_raider_fleet = {
	optimize_memory
	create_uf_fleet = {
		ID = wg_crisis
		NAME = "NAME_Raider_Fleet"
		NUM_bb = 6
		NUM_bc = 10
		NUM_ca = 10
		NUM_dd = 20
		NUM_uf_buffer = 1
		RAIDER_FLEET = yes
		add_trait_no_notify_EVENT = wg_crisis.122		# must be a fleet event id
	}
}

create_uf_glory = {
	optimize_memory
	create_fleet = {
		name = "NAME_uf_glory_Fleet"
		settings = {
			spawn_debris = no
			is_ultra_boss = yes
		}
		effect = {
			set_owner = event_target:wg_crisis_country
			create_ship = {
				name = random
				design = "NAME_uf_glory"
				upgradable = no
			}
			set_location = {
				target = PREV
				distance = 100
				angle = random
			}
			set_fleet_stance = aggressive
			set_fleet_bombardment_stance = wg_doom2
			set_aggro_range_measure_from = self
			set_aggro_range = 500
			assign_leader = last_created_leader
		}
		settings = {
			can_upgrade = no
			uses_naval_capacity = yes
		}
	}
}

# 创建一队联合无人机（护卫舰）（无人机航母用）
# $NUM$:正常数量
# $EZ_NUM$:简单难度数量
create_uf_drones = {
	optimize_memory
	create_fleet = {
		[[NAME]
		name = $NAME$
		]
		settings = {
			spawn_debris = no
			can_upgrade = no
			can_change_composition = no
			can_change_leader = no
		}
		effect = {
			set_owner = PREVPREV
			set_fleet_flag = drones
			set_fleet_flag = normal_drones
			if = {
				limit = {
					OR = {
						has_global_flag = wg_crisis_easy
						has_global_flag = wg_crisis_very_easy
					}
				}
				while = {
					count = $EZ_NUM$
					create_ship = {
						name = "NAME_WG_EG_Corvette"
						design = "NAME_WG_EG_Corvette"
					}
				}
			}
			else = {
				while = {
					count = $NUM$
					create_ship = {
						name = "NAME_WG_EG_Corvette"
						design = "NAME_WG_EG_Corvette"
					}
				}
			}
			set_location = {
				target = PREV
				distance = 1
				angle = random
			}
			set_fleet_stance = aggressive
			set_aggro_range_measure_from = self
			set_aggro_range = 500
			if = {
				limit = {
					has_global_flag = wg_crisis_easy
				}
				fleet_event = {
					id = mwsge_drone.4
					days = 20
				}
			}
			else = {
				fleet_event = {
					id = mwsge_drone.4
					days = 40
				}
			}
		}
	}
}
